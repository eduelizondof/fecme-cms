import{d as N,s as j,r as x,v as q,a as B,e as t,u as e,h as E,w as i,b as o,x as M,f as a,g as D,j as F,t as g,o as w,F as I}from"./app-CwYIwQSC.js";import{_ as A,a as G,b as T}from"./PricingFeaturesEditor.vue_vue_type_script_setup_true_lang-qtfbe8CT.js";import{_ as z}from"./DynamicStringList.vue_vue_type_script_setup_true_lang-7iJEug10.js";import{_ as O}from"./GalleryEditor.vue_vue_type_script_setup_true_lang-D5puj094.js";import{_ as P}from"./ImagePicker.vue_vue_type_script_setup_true_lang-L4bjYwSZ.js";import{_ as $}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Dx9FjVC5.js";import{_ as m,a as p}from"./CardContent.vue_vue_type_script_setup_true_lang-jkoPtzf2.js";import{_ as f,a as _}from"./CardTitle.vue_vue_type_script_setup_true_lang-BZNL0rcZ.js";import{_ as v}from"./Input.vue_vue_type_script_setup_true_lang-BKSGu_pj.js";import{_ as u}from"./Label.vue_vue_type_script_setup_true_lang-rqdMovXo.js";import{d as W,_ as J,a as L,b as R,c as k}from"./SelectValue.vue_vue_type_script_setup_true_lang-C7kww9TU.js";import{_ as C}from"./Textarea.vue_vue_type_script_setup_true_lang-DTs7-eFu.js";import{_ as H}from"./AppLayout.vue_vue_type_script_setup_true_lang-BSX6QORE.js";import"./plus-Dbt_UliG.js";import"./createLucideIcon-CAlWoAif.js";import"./trash-2-B2KrgVcp.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-BNPmz6YY.js";import"./VisuallyHidden-BFsJM77K.js";import"./useForwardExpose-DwCRi1H8.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-Cp8unezc.js";import"./RovingFocusGroup-BEkph1Pq.js";import"./RovingFocusItem-BjJlZXYk.js";import"./upload-ELPgQsny.js";import"./chevron-down-BdPs_er2.js";import"./check-DKDx7fpG.js";import"./useFormControl-7wAwFzIT.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-DPfDGp1o.js";const K={class:"flex h-full flex-1 flex-col gap-4 p-4"},Q={class:"grid gap-6 lg:grid-cols-3"},X={class:"lg:col-span-2 space-y-6"},Y={class:"space-y-2"},Z={class:"grid gap-4 sm:grid-cols-2"},ee={class:"space-y-2"},se={class:"space-y-2"},te={class:"space-y-2"},ie={class:"space-y-2"},le={class:"space-y-6"},re={class:"flex items-center justify-between"},oe={class:"flex items-center gap-2"},ae=["checked"],ne={class:"text-xs text-muted-foreground"},de={class:"flex items-center justify-between"},ue={class:"flex items-center gap-2"},me=["checked"],pe={class:"text-xs text-muted-foreground"},fe={class:"flex items-center justify-between"},_e={class:"flex items-center gap-2"},ce=["checked"],ge={class:"text-xs text-muted-foreground"},ve={class:"space-y-2"},ye={class:"space-y-2"},Ve={class:"flex justify-end gap-4"},He=N({__name:"Edit",props:{service:{}},setup(V){const n=V,c=d=>{if(typeof d=="string"&&(d.startsWith("{")||d.startsWith("[")))try{return JSON.parse(d)}catch{return d}return d},y=d=>d===!0||d===1||d==="1"?!0:d===!1||d===0||d==="0"?!1:!!d,l=j({title:n.service.title||"",slug:n.service.slug||"",type:n.service.type||"tramite",short_description:n.service.short_description||"",main_image:n.service.main_image||"",image:n.service.image||"",show_in_services:y(n.service.show_in_services),show_in_pricing:y(n.service.show_in_pricing),pricing_category:n.service.pricing_category||"",pricing_features:c(n.service.pricing_features)||[],description:n.service.description||"",featured:c(n.service.featured)||null,gallery:c(n.service.gallery)||[],requirements:c(n.service.requirements)||[],cost:c(n.service.cost)||null,is_active:y(n.service.is_active),sort_order:n.service.sort_order||0}),b=x(!1);x(n.service.slug||""),q(()=>l.title,d=>{d&&!b.value&&(l.slug=d.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""))});const S=()=>{b.value=!0},U=()=>{l.show_in_services=!!l.show_in_services,l.show_in_pricing=!!l.show_in_pricing,l.is_active=!!l.is_active,l.put(`/cms/services/${n.service.id}`)},h=[{title:"Dashboard",href:"/dashboard"},{title:"Servicios",href:"/cms/services"},{title:"Editar",href:`/cms/services/${n.service.id}/edit`}];return(d,s)=>(w(),B(I,null,[t(e(E),{title:`Editar: ${V.service.title} - CMS`},null,8,["title"]),t(H,{breadcrumbs:h},{default:i(()=>[o("div",K,[s[39]||(s[39]=o("div",{class:"flex items-center justify-between"},[o("h2",{class:"text-2xl font-bold tracking-tight"},"Editar Servicio")],-1)),o("form",{onSubmit:M(U,["prevent"]),class:"space-y-6"},[o("div",Q,[o("div",X,[t(e(m),null,{default:i(()=>[t(e(f),null,{default:i(()=>[t(e(_),null,{default:i(()=>[...s[17]||(s[17]=[a("Información básica",-1)])]),_:1})]),_:1}),t(e(p),{class:"space-y-4"},{default:i(()=>[o("div",Y,[t(e(u),{for:"title"},{default:i(()=>[...s[18]||(s[18]=[a("Título *",-1)])]),_:1}),t(e(v),{id:"title",modelValue:e(l).title,"onUpdate:modelValue":s[0]||(s[0]=r=>e(l).title=r),placeholder:"Nombre del servicio"},null,8,["modelValue"])]),o("div",Z,[o("div",ee,[t(e(u),{for:"slug"},{default:i(()=>[...s[19]||(s[19]=[a("Slug",-1)])]),_:1}),t(e(v),{id:"slug",modelValue:e(l).slug,"onUpdate:modelValue":s[1]||(s[1]=r=>e(l).slug=r),placeholder:"url-amigable (se genera automáticamente desde el título)",onInput:S},null,8,["modelValue"]),s[20]||(s[20]=o("p",{class:"text-xs text-muted-foreground"}," Se regenera automáticamente desde el título mientras escribes ",-1))]),o("div",se,[t(e(u),{for:"type"},{default:i(()=>[...s[21]||(s[21]=[a("Tipo",-1)])]),_:1}),t(e(W),{modelValue:e(l).type,"onUpdate:modelValue":s[2]||(s[2]=r=>e(l).type=r)},{default:i(()=>[t(e(J),null,{default:i(()=>[t(e(L),{placeholder:"Seleccionar tipo"})]),_:1}),t(e(R),null,{default:i(()=>[t(e(k),{value:"tramite"},{default:i(()=>[...s[22]||(s[22]=[a("Trámite",-1)])]),_:1}),t(e(k),{value:"servicio"},{default:i(()=>[...s[23]||(s[23]=[a("Servicio",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),o("div",te,[t(e(u),{for:"short_description"},{default:i(()=>[...s[24]||(s[24]=[a("Descripción corta",-1)])]),_:1}),t(e(C),{id:"short_description",modelValue:e(l).short_description,"onUpdate:modelValue":s[3]||(s[3]=r=>e(l).short_description=r),rows:2},null,8,["modelValue"])]),o("div",ie,[t(e(u),{for:"description"},{default:i(()=>[...s[25]||(s[25]=[a("Descripción completa",-1)])]),_:1}),t(e(C),{id:"description",modelValue:e(l).description,"onUpdate:modelValue":s[4]||(s[4]=r=>e(l).description=r),rows:4},null,8,["modelValue"])])]),_:1})]),_:1}),t(e(m),null,{default:i(()=>[t(e(f),null,{default:i(()=>[t(e(_),null,{default:i(()=>[...s[26]||(s[26]=[a("Características destacadas",-1)])]),_:1})]),_:1}),t(e(p),null,{default:i(()=>[t(A,{modelValue:e(l).featured,"onUpdate:modelValue":s[5]||(s[5]=r=>e(l).featured=r),label:"","title-placeholder":"¿Por qué elegir este servicio?","items-label":"Beneficios / Características"},null,8,["modelValue"])]),_:1})]),_:1}),t(e(m),null,{default:i(()=>[t(e(f),null,{default:i(()=>[t(e(_),null,{default:i(()=>[...s[27]||(s[27]=[a("Requisitos",-1)])]),_:1})]),_:1}),t(e(p),null,{default:i(()=>[t(z,{modelValue:e(l).requirements,"onUpdate:modelValue":s[6]||(s[6]=r=>e(l).requirements=r),label:"",placeholder:"Agregar requisito...","add-button-text":"Agregar requisito"},null,8,["modelValue"])]),_:1})]),_:1}),t(e(m),null,{default:i(()=>[t(e(f),null,{default:i(()=>[t(e(_),null,{default:i(()=>[...s[28]||(s[28]=[a("Costos",-1)])]),_:1})]),_:1}),t(e(p),null,{default:i(()=>[t(G,{modelValue:e(l).cost,"onUpdate:modelValue":s[7]||(s[7]=r=>e(l).cost=r),label:""},null,8,["modelValue"])]),_:1})]),_:1})]),o("div",le,[t(e(m),null,{default:i(()=>[t(e(f),null,{default:i(()=>[t(e(_),null,{default:i(()=>[...s[29]||(s[29]=[a("Publicación",-1)])]),_:1})]),_:1}),t(e(p),{class:"space-y-4"},{default:i(()=>[o("div",re,[t(e(u),{for:"is_active"},{default:i(()=>[...s[30]||(s[30]=[a("Activo",-1)])]),_:1}),o("div",oe,[o("input",{id:"is_active",type:"checkbox",checked:e(l).is_active,onChange:s[8]||(s[8]=r=>e(l).is_active=r.target.checked),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,ae),o("span",ne,g(e(l).is_active?"Sí":"No"),1)])]),o("div",de,[t(e(u),{for:"show_in_services"},{default:i(()=>[...s[31]||(s[31]=[a("Mostrar en servicios",-1)])]),_:1}),o("div",ue,[o("input",{id:"show_in_services",type:"checkbox",checked:e(l).show_in_services,onChange:s[9]||(s[9]=r=>e(l).show_in_services=r.target.checked),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,me),o("span",pe,g(e(l).show_in_services?"Sí":"No"),1)])]),o("div",fe,[t(e(u),{for:"show_in_pricing"},{default:i(()=>[...s[32]||(s[32]=[a("Mostrar en precios",-1)])]),_:1}),o("div",_e,[o("input",{id:"show_in_pricing",type:"checkbox",checked:e(l).show_in_pricing,onChange:s[10]||(s[10]=r=>e(l).show_in_pricing=r.target.checked),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,ce),o("span",ge,g(e(l).show_in_pricing?"Sí":"No"),1)])]),o("div",ve,[t(e(u),{for:"sort_order"},{default:i(()=>[...s[33]||(s[33]=[a("Orden",-1)])]),_:1}),t(e(v),{id:"sort_order",modelValue:e(l).sort_order,"onUpdate:modelValue":s[11]||(s[11]=r=>e(l).sort_order=r),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])])]),_:1})]),_:1}),t(e(m),null,{default:i(()=>[t(e(f),null,{default:i(()=>[t(e(_),null,{default:i(()=>[...s[34]||(s[34]=[a("Imagen principal",-1)])]),_:1})]),_:1}),t(e(p),null,{default:i(()=>[t(P,{modelValue:e(l).main_image,"onUpdate:modelValue":s[12]||(s[12]=r=>e(l).main_image=r),label:""},null,8,["modelValue"])]),_:1})]),_:1}),t(e(m),null,{default:i(()=>[t(e(f),null,{default:i(()=>[t(e(_),null,{default:i(()=>[...s[35]||(s[35]=[a("Galería",-1)])]),_:1})]),_:1}),t(e(p),null,{default:i(()=>[t(O,{modelValue:e(l).gallery,"onUpdate:modelValue":s[13]||(s[13]=r=>e(l).gallery=r),label:"","simple-mode":!0},null,8,["modelValue"])]),_:1})]),_:1}),e(l).show_in_pricing?(w(),D(e(m),{key:0},{default:i(()=>[t(e(f),null,{default:i(()=>[t(e(_),null,{default:i(()=>[...s[36]||(s[36]=[a("Configuración de precios",-1)])]),_:1})]),_:1}),t(e(p),{class:"space-y-4"},{default:i(()=>[o("div",ye,[t(e(u),{for:"pricing_category"},{default:i(()=>[...s[37]||(s[37]=[a("Categoría de precio",-1)])]),_:1}),t(e(v),{id:"pricing_category",modelValue:e(l).pricing_category,"onUpdate:modelValue":s[14]||(s[14]=r=>e(l).pricing_category=r),placeholder:"Ej: Certificado"},null,8,["modelValue"])]),t(T,{modelValue:e(l).pricing_features,"onUpdate:modelValue":s[15]||(s[15]=r=>e(l).pricing_features=r),label:""},null,8,["modelValue"])]),_:1})]),_:1})):F("",!0)])]),o("div",Ve,[t(e($),{type:"button",variant:"outline",onClick:s[16]||(s[16]=r=>d.$inertia.visit("/cms/services"))},{default:i(()=>[...s[38]||(s[38]=[a(" Cancelar ",-1)])]),_:1}),t(e($),{type:"submit",disabled:e(l).processing},{default:i(()=>[a(g(e(l).processing?"Guardando...":"Guardar cambios"),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{He as default};
