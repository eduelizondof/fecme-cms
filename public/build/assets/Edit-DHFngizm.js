import{d as N,s as q,r as x,A as j,c as B,a as s,u as e,h as E,w as i,b as o,v as M,e as a,f as D,i as A,t as g,o as w,F}from"./app-CPHlgx55.js";import{_ as I,a as G,b as T}from"./PricingFeaturesEditor.vue_vue_type_script_setup_true_lang-DS9hz68s.js";import{_ as z}from"./DynamicStringList.vue_vue_type_script_setup_true_lang-e6KmMZHF.js";import{_ as O}from"./GalleryEditor.vue_vue_type_script_setup_true_lang-CriJMsJr.js";import{_ as P}from"./ImagePicker.vue_vue_type_script_setup_true_lang-B5Oeiqlp.js";import{_ as $}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DMwN9IJa.js";import{_ as m,a as p}from"./CardContent.vue_vue_type_script_setup_true_lang-CYxWrtw0.js";import{_ as f,a as _}from"./CardTitle.vue_vue_type_script_setup_true_lang-CyDQQ-Ve.js";import{_ as v}from"./Input.vue_vue_type_script_setup_true_lang-CroVkrpQ.js";import{_ as u}from"./Label.vue_vue_type_script_setup_true_lang-CSbmn5zv.js";import{_ as W,a as J,b as L,c as R,d as k}from"./SelectValue.vue_vue_type_script_setup_true_lang-BqFuqvil.js";import{_ as C}from"./Textarea.vue_vue_type_script_setup_true_lang-Bd-_Rddl.js";import{_ as H}from"./AppLayout.vue_vue_type_script_setup_true_lang-yrloNx61.js";import"./plus-Co-iqWg6.js";import"./createLucideIcon-Dz8tFe-G.js";import"./trash-2-By-EVhZV.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-DRA3-dek.js";import"./VisuallyHidden-B2eXh3V8.js";import"./useForwardExpose-DBPAtrp2.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-Bb-dASVQ.js";import"./RovingFocusGroup-2sAUgvt-.js";import"./RovingFocusItem-DymYGBV0.js";import"./upload-CgH_I0Ft.js";import"./chevron-down-DilkZ84D.js";import"./check-C034z3yx.js";import"./nullish-B9QBIykp.js";import"./useFormControl-zEddSedF.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-DPfDGp1o.js";const K={class:"flex h-full flex-1 flex-col gap-4 p-4"},Q={class:"grid gap-6 lg:grid-cols-3"},X={class:"lg:col-span-2 space-y-6"},Y={class:"space-y-2"},Z={class:"grid gap-4 sm:grid-cols-2"},ee={class:"space-y-2"},te={class:"space-y-2"},se={class:"space-y-2"},ie={class:"space-y-2"},le={class:"space-y-6"},re={class:"flex items-center justify-between"},oe={class:"flex items-center gap-2"},ae=["checked"],ne={class:"text-xs text-muted-foreground"},de={class:"flex items-center justify-between"},ue={class:"flex items-center gap-2"},me=["checked"],pe={class:"text-xs text-muted-foreground"},fe={class:"flex items-center justify-between"},_e={class:"flex items-center gap-2"},ce=["checked"],ge={class:"text-xs text-muted-foreground"},ve={class:"space-y-2"},ye={class:"space-y-2"},Ve={class:"flex justify-end gap-4"},Ke=N({__name:"Edit",props:{service:{}},setup(V){const n=V,c=d=>{if(typeof d=="string"&&(d.startsWith("{")||d.startsWith("[")))try{return JSON.parse(d)}catch{return d}return d},y=d=>d===!0||d===1||d==="1"?!0:d===!1||d===0||d==="0"?!1:!!d,l=q({title:n.service.title||"",slug:n.service.slug||"",type:n.service.type||"tramite",short_description:n.service.short_description||"",main_image:n.service.main_image||"",image:n.service.image||"",show_in_services:y(n.service.show_in_services),show_in_pricing:y(n.service.show_in_pricing),pricing_category:n.service.pricing_category||"",pricing_features:c(n.service.pricing_features)||[],description:n.service.description||"",featured:c(n.service.featured)||null,gallery:c(n.service.gallery)||[],requirements:c(n.service.requirements)||[],cost:c(n.service.cost)||null,is_active:y(n.service.is_active),sort_order:n.service.sort_order||0}),b=x(!1);x(n.service.slug||""),j(()=>l.title,d=>{d&&!b.value&&(l.slug=d.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""))});const S=()=>{b.value=!0},U=()=>{l.show_in_services=!!l.show_in_services,l.show_in_pricing=!!l.show_in_pricing,l.is_active=!!l.is_active,l.put(`/cms/services/${n.service.id}`)},h=[{title:"Dashboard",href:"/dashboard"},{title:"Servicios",href:"/cms/services"},{title:"Editar",href:`/cms/services/${n.service.id}/edit`}];return(d,t)=>(w(),B(F,null,[s(e(E),{title:`Editar: ${V.service.title} - CMS`},null,8,["title"]),s(H,{breadcrumbs:h},{default:i(()=>[o("div",K,[t[39]||(t[39]=o("div",{class:"flex items-center justify-between"},[o("h2",{class:"text-2xl font-bold tracking-tight"},"Editar Servicio")],-1)),o("form",{onSubmit:M(U,["prevent"]),class:"space-y-6"},[o("div",Q,[o("div",X,[s(e(m),null,{default:i(()=>[s(e(f),null,{default:i(()=>[s(e(_),null,{default:i(()=>[...t[17]||(t[17]=[a("Información básica",-1)])]),_:1})]),_:1}),s(e(p),{class:"space-y-4"},{default:i(()=>[o("div",Y,[s(e(u),{for:"title"},{default:i(()=>[...t[18]||(t[18]=[a("Título *",-1)])]),_:1}),s(e(v),{id:"title",modelValue:e(l).title,"onUpdate:modelValue":t[0]||(t[0]=r=>e(l).title=r),placeholder:"Nombre del servicio"},null,8,["modelValue"])]),o("div",Z,[o("div",ee,[s(e(u),{for:"slug"},{default:i(()=>[...t[19]||(t[19]=[a("Slug",-1)])]),_:1}),s(e(v),{id:"slug",modelValue:e(l).slug,"onUpdate:modelValue":t[1]||(t[1]=r=>e(l).slug=r),placeholder:"url-amigable (se genera automáticamente desde el título)",onInput:S},null,8,["modelValue"]),t[20]||(t[20]=o("p",{class:"text-xs text-muted-foreground"}," Se regenera automáticamente desde el título mientras escribes ",-1))]),o("div",te,[s(e(u),{for:"type"},{default:i(()=>[...t[21]||(t[21]=[a("Tipo",-1)])]),_:1}),s(e(W),{modelValue:e(l).type,"onUpdate:modelValue":t[2]||(t[2]=r=>e(l).type=r)},{default:i(()=>[s(e(J),null,{default:i(()=>[s(e(L),{placeholder:"Seleccionar tipo"})]),_:1}),s(e(R),null,{default:i(()=>[s(e(k),{value:"tramite"},{default:i(()=>[...t[22]||(t[22]=[a("Trámite",-1)])]),_:1}),s(e(k),{value:"servicio"},{default:i(()=>[...t[23]||(t[23]=[a("Servicio",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),o("div",se,[s(e(u),{for:"short_description"},{default:i(()=>[...t[24]||(t[24]=[a("Descripción corta",-1)])]),_:1}),s(e(C),{id:"short_description",modelValue:e(l).short_description,"onUpdate:modelValue":t[3]||(t[3]=r=>e(l).short_description=r),rows:2},null,8,["modelValue"])]),o("div",ie,[s(e(u),{for:"description"},{default:i(()=>[...t[25]||(t[25]=[a("Descripción completa",-1)])]),_:1}),s(e(C),{id:"description",modelValue:e(l).description,"onUpdate:modelValue":t[4]||(t[4]=r=>e(l).description=r),rows:4},null,8,["modelValue"])])]),_:1})]),_:1}),s(e(m),null,{default:i(()=>[s(e(f),null,{default:i(()=>[s(e(_),null,{default:i(()=>[...t[26]||(t[26]=[a("Características destacadas",-1)])]),_:1})]),_:1}),s(e(p),null,{default:i(()=>[s(I,{modelValue:e(l).featured,"onUpdate:modelValue":t[5]||(t[5]=r=>e(l).featured=r),label:"","title-placeholder":"¿Por qué elegir este servicio?","items-label":"Beneficios / Características"},null,8,["modelValue"])]),_:1})]),_:1}),s(e(m),null,{default:i(()=>[s(e(f),null,{default:i(()=>[s(e(_),null,{default:i(()=>[...t[27]||(t[27]=[a("Requisitos",-1)])]),_:1})]),_:1}),s(e(p),null,{default:i(()=>[s(z,{modelValue:e(l).requirements,"onUpdate:modelValue":t[6]||(t[6]=r=>e(l).requirements=r),label:"",placeholder:"Agregar requisito...","add-button-text":"Agregar requisito"},null,8,["modelValue"])]),_:1})]),_:1}),s(e(m),null,{default:i(()=>[s(e(f),null,{default:i(()=>[s(e(_),null,{default:i(()=>[...t[28]||(t[28]=[a("Costos",-1)])]),_:1})]),_:1}),s(e(p),null,{default:i(()=>[s(G,{modelValue:e(l).cost,"onUpdate:modelValue":t[7]||(t[7]=r=>e(l).cost=r),label:""},null,8,["modelValue"])]),_:1})]),_:1})]),o("div",le,[s(e(m),null,{default:i(()=>[s(e(f),null,{default:i(()=>[s(e(_),null,{default:i(()=>[...t[29]||(t[29]=[a("Publicación",-1)])]),_:1})]),_:1}),s(e(p),{class:"space-y-4"},{default:i(()=>[o("div",re,[s(e(u),{for:"is_active"},{default:i(()=>[...t[30]||(t[30]=[a("Activo",-1)])]),_:1}),o("div",oe,[o("input",{id:"is_active",type:"checkbox",checked:e(l).is_active,onChange:t[8]||(t[8]=r=>e(l).is_active=r.target.checked),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,ae),o("span",ne,g(e(l).is_active?"Sí":"No"),1)])]),o("div",de,[s(e(u),{for:"show_in_services"},{default:i(()=>[...t[31]||(t[31]=[a("Mostrar en servicios",-1)])]),_:1}),o("div",ue,[o("input",{id:"show_in_services",type:"checkbox",checked:e(l).show_in_services,onChange:t[9]||(t[9]=r=>e(l).show_in_services=r.target.checked),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,me),o("span",pe,g(e(l).show_in_services?"Sí":"No"),1)])]),o("div",fe,[s(e(u),{for:"show_in_pricing"},{default:i(()=>[...t[32]||(t[32]=[a("Mostrar en precios",-1)])]),_:1}),o("div",_e,[o("input",{id:"show_in_pricing",type:"checkbox",checked:e(l).show_in_pricing,onChange:t[10]||(t[10]=r=>e(l).show_in_pricing=r.target.checked),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,ce),o("span",ge,g(e(l).show_in_pricing?"Sí":"No"),1)])]),o("div",ve,[s(e(u),{for:"sort_order"},{default:i(()=>[...t[33]||(t[33]=[a("Orden",-1)])]),_:1}),s(e(v),{id:"sort_order",modelValue:e(l).sort_order,"onUpdate:modelValue":t[11]||(t[11]=r=>e(l).sort_order=r),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])])]),_:1})]),_:1}),s(e(m),null,{default:i(()=>[s(e(f),null,{default:i(()=>[s(e(_),null,{default:i(()=>[...t[34]||(t[34]=[a("Imagen principal",-1)])]),_:1})]),_:1}),s(e(p),null,{default:i(()=>[s(P,{modelValue:e(l).main_image,"onUpdate:modelValue":t[12]||(t[12]=r=>e(l).main_image=r),label:""},null,8,["modelValue"])]),_:1})]),_:1}),s(e(m),null,{default:i(()=>[s(e(f),null,{default:i(()=>[s(e(_),null,{default:i(()=>[...t[35]||(t[35]=[a("Galería",-1)])]),_:1})]),_:1}),s(e(p),null,{default:i(()=>[s(O,{modelValue:e(l).gallery,"onUpdate:modelValue":t[13]||(t[13]=r=>e(l).gallery=r),label:"","simple-mode":!0},null,8,["modelValue"])]),_:1})]),_:1}),e(l).show_in_pricing?(w(),D(e(m),{key:0},{default:i(()=>[s(e(f),null,{default:i(()=>[s(e(_),null,{default:i(()=>[...t[36]||(t[36]=[a("Configuración de precios",-1)])]),_:1})]),_:1}),s(e(p),{class:"space-y-4"},{default:i(()=>[o("div",ye,[s(e(u),{for:"pricing_category"},{default:i(()=>[...t[37]||(t[37]=[a("Categoría de precio",-1)])]),_:1}),s(e(v),{id:"pricing_category",modelValue:e(l).pricing_category,"onUpdate:modelValue":t[14]||(t[14]=r=>e(l).pricing_category=r),placeholder:"Ej: Certificado"},null,8,["modelValue"])]),s(T,{modelValue:e(l).pricing_features,"onUpdate:modelValue":t[15]||(t[15]=r=>e(l).pricing_features=r),label:""},null,8,["modelValue"])]),_:1})]),_:1})):A("",!0)])]),o("div",Ve,[s(e($),{type:"button",variant:"outline",onClick:t[16]||(t[16]=r=>d.$inertia.visit("/cms/services"))},{default:i(()=>[...t[38]||(t[38]=[a(" Cancelar ",-1)])]),_:1}),s(e($),{type:"submit",disabled:e(l).processing},{default:i(()=>[a(g(e(l).processing?"Guardando...":"Guardar cambios"),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{Ke as default};
