import{d as h,s as q,r as x,A as j,c as B,a as s,u as e,h as E,w as i,b as o,v as M,e as a,f as D,i as F,t as g,o as w,F as A}from"./app-CsPl9vkU.js";import{_ as I,a as G,b as T,c as z}from"./PricingFeaturesEditor.vue_vue_type_script_setup_true_lang-DhlldZtz.js";import{_ as O}from"./DynamicStringList.vue_vue_type_script_setup_true_lang-BSkNlB1J.js";import{_ as P}from"./GalleryEditor.vue_vue_type_script_setup_true_lang-C4zIN8FP.js";import{_ as W}from"./ImagePicker.vue_vue_type_script_setup_true_lang-DGrrUjc1.js";import{_ as $}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CwrU5Ksu.js";import{_ as m,a as f}from"./CardContent.vue_vue_type_script_setup_true_lang-KQoEsZNS.js";import{_ as p,a as _}from"./CardTitle.vue_vue_type_script_setup_true_lang-Jqojbx-I.js";import{_ as v}from"./Input.vue_vue_type_script_setup_true_lang-DjygxYDF.js";import{_ as u}from"./Label.vue_vue_type_script_setup_true_lang-CJEhT3gk.js";import{_ as J,a as L,b as R,c as H,d as k}from"./SelectValue.vue_vue_type_script_setup_true_lang-DeyPnEqR.js";import{_ as C}from"./Textarea.vue_vue_type_script_setup_true_lang-DfnVVfHk.js";import{_ as K}from"./AppLayout.vue_vue_type_script_setup_true_lang-BofqAx52.js";import"./plus-IjGSVuXj.js";import"./createLucideIcon-D-xDPnh1.js";import"./trash-2-Bq_mdN_5.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-8HFOkwhA.js";import"./VisuallyHidden-Pe_ksFTX.js";import"./useForwardExpose-DsbURfmj.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-CRGsyOFQ.js";import"./RovingFocusGroup-zXD778V-.js";import"./RovingFocusItem-BHkFxsWJ.js";import"./upload-BxLQN8Rs.js";import"./chevron-down-BKihw4we.js";import"./check-DWQt73f_.js";import"./nullish-B9QBIykp.js";import"./useFormControl-BFWudJY8.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-DPfDGp1o.js";const Q={class:"flex h-full flex-1 flex-col gap-4 p-4"},X={class:"grid gap-6 lg:grid-cols-3"},Y={class:"lg:col-span-2 space-y-6"},Z={class:"space-y-2"},ee={class:"grid gap-4 sm:grid-cols-2"},te={class:"space-y-2"},se={class:"space-y-2"},ie={class:"space-y-2"},le={class:"space-y-2"},re={class:"space-y-6"},oe={class:"flex items-center justify-between"},ae={class:"flex items-center gap-2"},ne=["checked"],de={class:"text-xs text-muted-foreground"},ue={class:"flex items-center justify-between"},me={class:"flex items-center gap-2"},fe=["checked"],pe={class:"text-xs text-muted-foreground"},_e={class:"flex items-center justify-between"},ce={class:"flex items-center gap-2"},ge=["checked"],ve={class:"text-xs text-muted-foreground"},ye={class:"space-y-2"},Ve={class:"space-y-2"},be={class:"flex justify-end gap-4"},Qe=h({__name:"Edit",props:{service:{}},setup(V){const n=V,c=d=>{if(typeof d=="string"&&(d.startsWith("{")||d.startsWith("[")))try{return JSON.parse(d)}catch{return d}return d},y=d=>d===!0||d===1||d==="1"?!0:d===!1||d===0||d==="0"?!1:!!d,l=q({title:n.service.title||"",slug:n.service.slug||"",type:n.service.type||"tramite",short_description:n.service.short_description||"",main_image:n.service.main_image||"",image:n.service.image||"",show_in_services:y(n.service.show_in_services),show_in_pricing:y(n.service.show_in_pricing),pricing_category:n.service.pricing_category||"",pricing_features:c(n.service.pricing_features)||[],description:n.service.description||"",featured:c(n.service.featured)||null,gallery:c(n.service.gallery)||[],requirements:c(n.service.requirements)||[],cost:c(n.service.cost)||null,formats:c(n.service.formats)||null,is_active:y(n.service.is_active),sort_order:n.service.sort_order||0}),b=x(!1);x(n.service.slug||""),j(()=>l.title,d=>{d&&!b.value&&(l.slug=d.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""))});const S=()=>{b.value=!0},U=()=>{l.show_in_services=!!l.show_in_services,l.show_in_pricing=!!l.show_in_pricing,l.is_active=!!l.is_active,l.put(`/cms/services/${n.service.id}`)},N=[{title:"Dashboard",href:"/dashboard"},{title:"Servicios",href:"/cms/services"},{title:"Editar",href:`/cms/services/${n.service.id}/edit`}];return(d,t)=>(w(),B(A,null,[s(e(E),{title:`Editar: ${V.service.title} - CMS`},null,8,["title"]),s(K,{breadcrumbs:N},{default:i(()=>[o("div",Q,[t[41]||(t[41]=o("div",{class:"flex items-center justify-between"},[o("h2",{class:"text-2xl font-bold tracking-tight"},"Editar Servicio")],-1)),o("form",{onSubmit:M(U,["prevent"]),class:"space-y-6"},[o("div",X,[o("div",Y,[s(e(m),null,{default:i(()=>[s(e(p),null,{default:i(()=>[s(e(_),null,{default:i(()=>[...t[18]||(t[18]=[a("Información básica",-1)])]),_:1})]),_:1}),s(e(f),{class:"space-y-4"},{default:i(()=>[o("div",Z,[s(e(u),{for:"title"},{default:i(()=>[...t[19]||(t[19]=[a("Título *",-1)])]),_:1}),s(e(v),{id:"title",modelValue:e(l).title,"onUpdate:modelValue":t[0]||(t[0]=r=>e(l).title=r),placeholder:"Nombre del servicio"},null,8,["modelValue"])]),o("div",ee,[o("div",te,[s(e(u),{for:"slug"},{default:i(()=>[...t[20]||(t[20]=[a("Slug",-1)])]),_:1}),s(e(v),{id:"slug",modelValue:e(l).slug,"onUpdate:modelValue":t[1]||(t[1]=r=>e(l).slug=r),placeholder:"url-amigable (se genera automáticamente desde el título)",onInput:S},null,8,["modelValue"]),t[21]||(t[21]=o("p",{class:"text-xs text-muted-foreground"}," Se regenera automáticamente desde el título mientras escribes ",-1))]),o("div",se,[s(e(u),{for:"type"},{default:i(()=>[...t[22]||(t[22]=[a("Tipo",-1)])]),_:1}),s(e(J),{modelValue:e(l).type,"onUpdate:modelValue":t[2]||(t[2]=r=>e(l).type=r)},{default:i(()=>[s(e(L),null,{default:i(()=>[s(e(R),{placeholder:"Seleccionar tipo"})]),_:1}),s(e(H),null,{default:i(()=>[s(e(k),{value:"tramite"},{default:i(()=>[...t[23]||(t[23]=[a("Trámite",-1)])]),_:1}),s(e(k),{value:"servicio"},{default:i(()=>[...t[24]||(t[24]=[a("Servicio",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),o("div",ie,[s(e(u),{for:"short_description"},{default:i(()=>[...t[25]||(t[25]=[a("Descripción corta",-1)])]),_:1}),s(e(C),{id:"short_description",modelValue:e(l).short_description,"onUpdate:modelValue":t[3]||(t[3]=r=>e(l).short_description=r),rows:2},null,8,["modelValue"])]),o("div",le,[s(e(u),{for:"description"},{default:i(()=>[...t[26]||(t[26]=[a("Descripción completa",-1)])]),_:1}),s(e(C),{id:"description",modelValue:e(l).description,"onUpdate:modelValue":t[4]||(t[4]=r=>e(l).description=r),rows:4},null,8,["modelValue"])])]),_:1})]),_:1}),s(e(m),null,{default:i(()=>[s(e(p),null,{default:i(()=>[s(e(_),null,{default:i(()=>[...t[27]||(t[27]=[a("Características destacadas",-1)])]),_:1})]),_:1}),s(e(f),null,{default:i(()=>[s(I,{modelValue:e(l).featured,"onUpdate:modelValue":t[5]||(t[5]=r=>e(l).featured=r),label:"","title-placeholder":"¿Por qué elegir este servicio?","items-label":"Beneficios / Características"},null,8,["modelValue"])]),_:1})]),_:1}),s(e(m),null,{default:i(()=>[s(e(p),null,{default:i(()=>[s(e(_),null,{default:i(()=>[...t[28]||(t[28]=[a("Requisitos",-1)])]),_:1})]),_:1}),s(e(f),null,{default:i(()=>[s(O,{modelValue:e(l).requirements,"onUpdate:modelValue":t[6]||(t[6]=r=>e(l).requirements=r),label:"",placeholder:"Agregar requisito...","add-button-text":"Agregar requisito"},null,8,["modelValue"])]),_:1})]),_:1}),s(e(m),null,{default:i(()=>[s(e(p),null,{default:i(()=>[s(e(_),null,{default:i(()=>[...t[29]||(t[29]=[a("Costos",-1)])]),_:1})]),_:1}),s(e(f),null,{default:i(()=>[s(G,{modelValue:e(l).cost,"onUpdate:modelValue":t[7]||(t[7]=r=>e(l).cost=r),label:""},null,8,["modelValue"])]),_:1})]),_:1}),s(e(m),null,{default:i(()=>[s(e(p),null,{default:i(()=>[s(e(_),null,{default:i(()=>[...t[30]||(t[30]=[a("Formatos",-1)])]),_:1})]),_:1}),s(e(f),null,{default:i(()=>[s(T,{modelValue:e(l).formats,"onUpdate:modelValue":t[8]||(t[8]=r=>e(l).formats=r),label:""},null,8,["modelValue"])]),_:1})]),_:1})]),o("div",re,[s(e(m),null,{default:i(()=>[s(e(p),null,{default:i(()=>[s(e(_),null,{default:i(()=>[...t[31]||(t[31]=[a("Publicación",-1)])]),_:1})]),_:1}),s(e(f),{class:"space-y-4"},{default:i(()=>[o("div",oe,[s(e(u),{for:"is_active"},{default:i(()=>[...t[32]||(t[32]=[a("Activo",-1)])]),_:1}),o("div",ae,[o("input",{id:"is_active",type:"checkbox",checked:e(l).is_active,onChange:t[9]||(t[9]=r=>e(l).is_active=r.target.checked),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,ne),o("span",de,g(e(l).is_active?"Sí":"No"),1)])]),o("div",ue,[s(e(u),{for:"show_in_services"},{default:i(()=>[...t[33]||(t[33]=[a("Mostrar en servicios",-1)])]),_:1}),o("div",me,[o("input",{id:"show_in_services",type:"checkbox",checked:e(l).show_in_services,onChange:t[10]||(t[10]=r=>e(l).show_in_services=r.target.checked),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,fe),o("span",pe,g(e(l).show_in_services?"Sí":"No"),1)])]),o("div",_e,[s(e(u),{for:"show_in_pricing"},{default:i(()=>[...t[34]||(t[34]=[a("Mostrar en precios",-1)])]),_:1}),o("div",ce,[o("input",{id:"show_in_pricing",type:"checkbox",checked:e(l).show_in_pricing,onChange:t[11]||(t[11]=r=>e(l).show_in_pricing=r.target.checked),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,40,ge),o("span",ve,g(e(l).show_in_pricing?"Sí":"No"),1)])]),o("div",ye,[s(e(u),{for:"sort_order"},{default:i(()=>[...t[35]||(t[35]=[a("Orden",-1)])]),_:1}),s(e(v),{id:"sort_order",modelValue:e(l).sort_order,"onUpdate:modelValue":t[12]||(t[12]=r=>e(l).sort_order=r),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])])]),_:1})]),_:1}),s(e(m),null,{default:i(()=>[s(e(p),null,{default:i(()=>[s(e(_),null,{default:i(()=>[...t[36]||(t[36]=[a("Imagen principal",-1)])]),_:1})]),_:1}),s(e(f),null,{default:i(()=>[s(W,{modelValue:e(l).main_image,"onUpdate:modelValue":t[13]||(t[13]=r=>e(l).main_image=r),label:""},null,8,["modelValue"])]),_:1})]),_:1}),s(e(m),null,{default:i(()=>[s(e(p),null,{default:i(()=>[s(e(_),null,{default:i(()=>[...t[37]||(t[37]=[a("Galería",-1)])]),_:1})]),_:1}),s(e(f),null,{default:i(()=>[s(P,{modelValue:e(l).gallery,"onUpdate:modelValue":t[14]||(t[14]=r=>e(l).gallery=r),label:"","simple-mode":!0},null,8,["modelValue"])]),_:1})]),_:1}),e(l).show_in_pricing?(w(),D(e(m),{key:0},{default:i(()=>[s(e(p),null,{default:i(()=>[s(e(_),null,{default:i(()=>[...t[38]||(t[38]=[a("Configuración de precios",-1)])]),_:1})]),_:1}),s(e(f),{class:"space-y-4"},{default:i(()=>[o("div",Ve,[s(e(u),{for:"pricing_category"},{default:i(()=>[...t[39]||(t[39]=[a("Categoría de precio",-1)])]),_:1}),s(e(v),{id:"pricing_category",modelValue:e(l).pricing_category,"onUpdate:modelValue":t[15]||(t[15]=r=>e(l).pricing_category=r),placeholder:"Ej: Certificado"},null,8,["modelValue"])]),s(z,{modelValue:e(l).pricing_features,"onUpdate:modelValue":t[16]||(t[16]=r=>e(l).pricing_features=r),label:""},null,8,["modelValue"])]),_:1})]),_:1})):F("",!0)])]),o("div",be,[s(e($),{type:"button",variant:"outline",onClick:t[17]||(t[17]=r=>d.$inertia.visit("/cms/services"))},{default:i(()=>[...t[40]||(t[40]=[a(" Cancelar ",-1)])]),_:1}),s(e($),{type:"submit",disabled:e(l).processing},{default:i(()=>[a(g(e(l).processing?"Guardando...":"Guardar cambios"),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{Qe as default};
