import{_ as U}from"./DeleteConfirmDialog.vue_vue_type_script_setup_true_lang-BNpEJIbD.js";import{_ as h}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CwrU5Ksu.js";import{_ as F,a as S}from"./CardContent.vue_vue_type_script_setup_true_lang-KQoEsZNS.js";import{_ as z}from"./Input.vue_vue_type_script_setup_true_lang-DjygxYDF.js";import{_ as N}from"./AppLayout.vue_vue_type_script_setup_true_lang-BofqAx52.js";import{d as T,r as u,c as m,a as s,u as r,h as j,w as i,b as o,i as V,e as b,t as v,o as l,F as y,p as I,f as L,C as w}from"./app-CsPl9vkU.js";import{U as q}from"./upload-BxLQN8Rs.js";import{I as A}from"./image-C9Pr1sf6.js";import{T as K}from"./trash-2-Bq_mdN_5.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-8HFOkwhA.js";import"./VisuallyHidden-Pe_ksFTX.js";import"./useForwardExpose-DsbURfmj.js";import"./DialogDescription.vue_vue_type_script_setup_true_lang-BcMrIzhr.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-BqFuavvC.js";import"./RovingFocusGroup-zXD778V-.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-DPfDGp1o.js";import"./createLucideIcon-D-xDPnh1.js";const R={class:"flex h-full flex-1 flex-col gap-4 p-4"},G={class:"flex items-center justify-between"},H={class:"flex items-center gap-4"},J={key:0,class:"text-sm text-destructive"},O={key:1,class:"flex flex-col items-center justify-center py-12 text-muted-foreground"},P={key:2,class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4"},Q=["src","alt"],W={class:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2"},X={class:"p-2 text-xs truncate"},Y={class:"font-medium truncate"},Z={class:"text-muted-foreground"},xe=T({__name:"Index",props:{media:{}},setup(k){const n=u(k.media.data),c=u(!1),p=u(""),f=u(!1),d=u(null),C=async e=>{const a=e.target,t=a.files;if(t?.length){c.value=!0,p.value="";for(const _ of Array.from(t)){const x=new FormData;x.append("file",_);try{const g=await w.post("/cms/media",x,{headers:{"Content-Type":"multipart/form-data"}});n.value.unshift(g.data.media)}catch(g){p.value=g.response?.data?.message||"Error al subir archivo"}}c.value=!1,a.value=""}},$=e=>{d.value=e,f.value=!0},B=async()=>{if(d.value)try{await w.delete(`/cms/media/${d.value.id}`),n.value=n.value.filter(e=>e.id!==d.value?.id),f.value=!1,d.value=null}catch(e){console.error("Error deleting media:",e)}},D=e=>e<1024?e+" B":e<1024*1024?(e/1024).toFixed(1)+" KB":(e/(1024*1024)).toFixed(1)+" MB",E=e=>{navigator.clipboard.writeText(e)},M=[{title:"Dashboard",href:"/dashboard"},{title:"Media",href:"/cms/media"}];return(e,a)=>(l(),m(y,null,[s(r(j),{title:"Media - CMS"}),s(N,{breadcrumbs:M},{default:i(()=>[o("div",R,[o("div",G,[a[1]||(a[1]=o("h2",{class:"text-2xl font-bold tracking-tight"},"Biblioteca de Media",-1)),o("div",H,[s(r(z),{type:"file",accept:"image/*",multiple:"",disabled:c.value,onChange:C,class:"max-w-xs"},null,8,["disabled"]),s(r(h),{disabled:c.value},{default:i(()=>[s(r(q),{class:"mr-2 h-4 w-4"}),b(" "+v(c.value?"Subiendo...":"Subir"),1)]),_:1},8,["disabled"])])]),p.value?(l(),m("p",J,v(p.value),1)):V("",!0),n.value.length===0?(l(),m("div",O,[s(r(A),{class:"h-16 w-16 mb-4"}),a[2]||(a[2]=o("p",null,"No hay archivos en la biblioteca",-1)),a[3]||(a[3]=o("p",{class:"text-sm"},"Sube imágenes para comenzar",-1))])):(l(),m("div",P,[(l(!0),m(y,null,I(n.value,t=>(l(),L(r(F),{key:t.id,class:"overflow-hidden group"},{default:i(()=>[s(r(S),{class:"p-0 relative"},{default:i(()=>[o("img",{src:t.url,alt:t.name,class:"w-full aspect-square object-cover"},null,8,Q),o("div",W,[s(r(h),{variant:"secondary",size:"sm",onClick:_=>E(t.url)},{default:i(()=>[...a[4]||(a[4]=[b(" Copiar URL ",-1)])]),_:1},8,["onClick"]),s(r(h),{variant:"destructive",size:"icon",class:"h-8 w-8",onClick:_=>$(t)},{default:i(()=>[s(r(K),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),o("div",X,[o("p",Y,v(t.name),1),o("p",Z,v(D(t.size)),1)])]),_:2},1024)]),_:2},1024))),128))])),s(U,{open:f.value,"onUpdate:open":a[0]||(a[0]=t=>f.value=t),title:"Eliminar archivo",description:"¿Estás seguro de que deseas eliminar este archivo? Esta acción no se puede deshacer.",onConfirm:B},null,8,["open"])])]),_:1})],64))}});export{xe as default};
