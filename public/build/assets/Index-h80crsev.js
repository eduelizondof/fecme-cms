import{_ as U}from"./DeleteConfirmDialog.vue_vue_type_script_setup_true_lang-BvY26U6r.js";import{_ as h}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-sZz9Mk1i.js";import{_ as z,a as F}from"./CardContent.vue_vue_type_script_setup_true_lang-_rr4vPww.js";import{_ as S}from"./Input.vue_vue_type_script_setup_true_lang-AB0Jiufb.js";import{_ as j}from"./AppLayout.vue_vue_type_script_setup_true_lang-BC9ZMQcH.js";import{d as I,v as u,a as m,e as s,u as r,h as L,w as i,b as o,j as N,f as y,t as v,o as l,F as b,x as T,g as V,z as k}from"./app-DdsqN3T_.js";import{U as q}from"./upload-B9PKPBBM.js";import{c as A}from"./createLucideIcon-DaCMYqYG.js";import{T as K}from"./trash-2-DpJdeyxn.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-D61x6NXH.js";import"./VisuallyHidden-BADxonjd.js";import"./useForwardExpose-D2gwfd_t.js";import"./DialogDescription.vue_vue_type_script_setup_true_lang-B2pM33Lx.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-XAryILT0.js";import"./RovingFocusGroup-CkKkzSAL.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-DPfDGp1o.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=A("ImageIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),G={class:"flex h-full flex-1 flex-col gap-4 p-4"},H={class:"flex items-center justify-between"},J={class:"flex items-center gap-4"},O={key:0,class:"text-sm text-destructive"},P={key:1,class:"flex flex-col items-center justify-center py-12 text-muted-foreground"},Q={key:2,class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4"},W=["src","alt"],X={class:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2"},Y={class:"p-2 text-xs truncate"},Z={class:"font-medium truncate"},ee={class:"text-muted-foreground"},xe=I({__name:"Index",props:{media:{}},setup(w){const n=u(w.media.data),c=u(!1),p=u(""),f=u(!1),d=u(null),C=async e=>{const a=e.target,t=a.files;if(t?.length){c.value=!0,p.value="";for(const _ of Array.from(t)){const x=new FormData;x.append("file",_);try{const g=await k.post("/cms/media",x,{headers:{"Content-Type":"multipart/form-data"}});n.value.unshift(g.data.media)}catch(g){p.value=g.response?.data?.message||"Error al subir archivo"}}c.value=!1,a.value=""}},$=e=>{d.value=e,f.value=!0},B=async()=>{if(d.value)try{await k.delete(`/cms/media/${d.value.id}`),n.value=n.value.filter(e=>e.id!==d.value?.id),f.value=!1,d.value=null}catch(e){console.error("Error deleting media:",e)}},D=e=>e<1024?e+" B":e<1024*1024?(e/1024).toFixed(1)+" KB":(e/(1024*1024)).toFixed(1)+" MB",E=e=>{navigator.clipboard.writeText(e)},M=[{title:"Dashboard",href:"/dashboard"},{title:"Media",href:"/cms/media"}];return(e,a)=>(l(),m(b,null,[s(r(L),{title:"Media - CMS"}),s(j,{breadcrumbs:M},{default:i(()=>[o("div",G,[o("div",H,[a[1]||(a[1]=o("h2",{class:"text-2xl font-bold tracking-tight"},"Biblioteca de Media",-1)),o("div",J,[s(r(S),{type:"file",accept:"image/*",multiple:"",disabled:c.value,onChange:C,class:"max-w-xs"},null,8,["disabled"]),s(r(h),{disabled:c.value},{default:i(()=>[s(r(q),{class:"mr-2 h-4 w-4"}),y(" "+v(c.value?"Subiendo...":"Subir"),1)]),_:1},8,["disabled"])])]),p.value?(l(),m("p",O,v(p.value),1)):N("",!0),n.value.length===0?(l(),m("div",P,[s(r(R),{class:"h-16 w-16 mb-4"}),a[2]||(a[2]=o("p",null,"No hay archivos en la biblioteca",-1)),a[3]||(a[3]=o("p",{class:"text-sm"},"Sube imágenes para comenzar",-1))])):(l(),m("div",Q,[(l(!0),m(b,null,T(n.value,t=>(l(),V(r(z),{key:t.id,class:"overflow-hidden group"},{default:i(()=>[s(r(F),{class:"p-0 relative"},{default:i(()=>[o("img",{src:t.url,alt:t.name,class:"w-full aspect-square object-cover"},null,8,W),o("div",X,[s(r(h),{variant:"secondary",size:"sm",onClick:_=>E(t.url)},{default:i(()=>[...a[4]||(a[4]=[y(" Copiar URL ",-1)])]),_:1},8,["onClick"]),s(r(h),{variant:"destructive",size:"icon",class:"h-8 w-8",onClick:_=>$(t)},{default:i(()=>[s(r(K),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),o("div",Y,[o("p",Z,v(t.name),1),o("p",ee,v(D(t.size)),1)])]),_:2},1024)]),_:2},1024))),128))])),s(U,{open:f.value,"onUpdate:open":a[0]||(a[0]=t=>f.value=t),title:"Eliminar archivo",description:"¿Estás seguro de que deseas eliminar este archivo? Esta acción no se puede deshacer.",onConfirm:B},null,8,["open"])])]),_:1})],64))}});export{xe as default};
