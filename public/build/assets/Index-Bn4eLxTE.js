import{_ as I,S as M}from"./DataTable.vue_vue_type_script_setup_true_lang-XL2-tsvg.js";import{K as N,_ as U}from"./ChangePasswordDialog.vue_vue_type_script_setup_true_lang--O4nJXrM.js";import{_ as P}from"./DeleteConfirmDialog.vue_vue_type_script_setup_true_lang-BNpEJIbD.js";import{_ as S}from"./Pagination.vue_vue_type_script_setup_true_lang-90himbl6.js";import{_ as z}from"./index-DcMhZ4d7.js";import{_ as c}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CwrU5Ksu.js";import{_ as q}from"./AppLayout.vue_vue_type_script_setup_true_lang-BofqAx52.js";import{d as A,Z as B,k as T,r as u,c as V,a,u as t,h as F,w as r,b as p,l as K,e as g,t as k,f as v,i as L,z as O,o as d,F as Z,_ as R}from"./app-CsPl9vkU.js";import{T as X}from"./trash-2-Bq_mdN_5.js";import{c as y}from"./createLucideIcon-D-xDPnh1.js";import"./plus-IjGSVuXj.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-8HFOkwhA.js";import"./VisuallyHidden-Pe_ksFTX.js";import"./useForwardExpose-DsbURfmj.js";import"./DialogDescription.vue_vue_type_script_setup_true_lang-BcMrIzhr.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-BqFuavvC.js";import"./Input.vue_vue_type_script_setup_true_lang-DjygxYDF.js";import"./Label.vue_vue_type_script_setup_true_lang-CJEhT3gk.js";import"./RovingFocusGroup-zXD778V-.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-DPfDGp1o.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=y("PowerOffIcon",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=y("PowerIcon",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),G={class:"flex h-full flex-1 flex-col gap-4 p-4"},H={class:"flex items-center gap-2"},J={class:"flex items-center gap-2"},ye=A({__name:"Index",props:{users:{}},setup(i){const b=B(),w=T(()=>b.props.auth?.user?.id),x=[{key:"name",label:"Nombre"},{key:"email",label:"Email"},{key:"is_active",label:"Estado"},{key:"created_at",label:"Creado"}],m=u(!1),f=u(!1),l=u(null),_=u(""),h=s=>{l.value=s,m.value=!0},C=(s,o)=>{l.value=s,_.value=o,f.value=!0},$=s=>{confirm(`¿Estás seguro de que deseas ${s.is_active?"inactivar":"activar"} a ${s.name}?`)&&R.patch(`/cms/users/${s.id}/toggle-status`)},D=s=>{if(!s)return"Sin fecha";const o=new Date(s);return isNaN(o.getTime())||o.getFullYear()===1970?"Sin fecha":o.toLocaleDateString("es-MX",{year:"numeric",month:"long",day:"numeric",timeZone:"America/Mexico_City"})},E=[{title:"Dashboard",href:"/dashboard"},{title:"Usuarios",href:"/cms/users"}];return(s,o)=>(d(),V(Z,null,[a(t(F),{title:"Usuarios - CMS"}),a(q,{breadcrumbs:E},{default:r(()=>[p("div",G,[a(I,{title:"Usuarios",columns:x,data:i.users.data,"create-route":"/cms/users/create","edit-route":"/cms/users/:id/edit","delete-route":"/cms/users/:id","create-label":"Crear usuario",onDelete:h},{"cell-is_active":r(({value:e,item:n})=>[p("div",H,[a(t(z),{variant:e?"default":"secondary",class:O(e?"bg-green-500 text-white hover:bg-green-600":"")},{default:r(()=>[g(k(e?"Activo":"Inactivo"),1)]),_:2},1032,["variant","class"]),n.id!==w.value?(d(),v(t(c),{key:0,variant:"ghost",size:"icon",class:"h-6 w-6",onClick:Q=>$(n),title:e?"Inactivar usuario":"Activar usuario"},{default:r(()=>[e?(d(),v(t(Y),{key:0,class:"h-3 w-3"})):(d(),v(t(j),{key:1,class:"h-3 w-3"}))]),_:2},1032,["onClick","title"])):L("",!0)])]),"cell-created_at":r(({value:e})=>[g(k(D(e)),1)]),actions:r(({item:e})=>[p("div",J,[a(t(c),{variant:"ghost",size:"icon",onClick:n=>C(e.id,e.name),title:"Cambiar contraseña"},{default:r(()=>[a(t(N),{class:"h-4 w-4"})]),_:1},8,["onClick"]),a(t(K),{href:`/cms/users/${e.id}/edit`},{default:r(()=>[a(t(c),{variant:"ghost",size:"icon",title:"Editar"},{default:r(()=>[a(t(M),{class:"h-4 w-4"})]),_:1})]),_:1},8,["href"]),a(t(c),{variant:"ghost",size:"icon",class:"text-destructive hover:text-destructive",onClick:n=>h(e.id),title:"Eliminar"},{default:r(()=>[a(t(X),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]),_:1},8,["data"]),a(S,{links:i.users.links,from:i.users.from,to:i.users.to,total:i.users.total},null,8,["links","from","to","total"]),a(P,{open:m.value,"onUpdate:open":o[0]||(o[0]=e=>m.value=e),"delete-url":l.value?`/cms/users/${l.value}`:void 0,title:"Eliminar usuario",description:"¿Estás seguro de que deseas eliminar este usuario? Esta acción no se puede deshacer."},null,8,["open","delete-url"]),a(U,{open:f.value,"onUpdate:open":o[1]||(o[1]=e=>f.value=e),"user-id":l.value,"user-name":_.value},null,8,["open","user-id","user-name"])])]),_:1})],64))}});export{ye as default};
