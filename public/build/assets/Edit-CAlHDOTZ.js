import{d as C,s as N,r as V,A as S,a as v,e as t,u as l,h as A,w as s,b as d,v as B,f as i,j as F,o as y,t as x,F as j}from"./app-CFGUW6kf.js";import{_ as D}from"./ContentEditor.vue_vue_type_script_setup_true_lang-B9JUBFvx.js";import{_ as I}from"./GalleryEditor.vue_vue_type_script_setup_true_lang-sqVuMuYy.js";import{_ as M}from"./ImagePicker.vue_vue_type_script_setup_true_lang-B2By10Aq.js";import{_ as G}from"./TagsInput.vue_vue_type_script_setup_true_lang--tvLTXTW.js";import{_ as $}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-MGdKnaDe.js";import{_ as n,a as m}from"./CardContent.vue_vue_type_script_setup_true_lang-Bxd7PAmQ.js";import{_ as p,a as f}from"./CardTitle.vue_vue_type_script_setup_true_lang-DaldoyJh.js";import{_ as g}from"./Input.vue_vue_type_script_setup_true_lang-B-8nniR5.js";import{_ as u}from"./Label.vue_vue_type_script_setup_true_lang-DEAx1IKv.js";import{_ as T}from"./Switch.vue_vue_type_script_setup_true_lang-D59gFpb-.js";import{_ as U}from"./Textarea.vue_vue_type_script_setup_true_lang-D8fbo3O5.js";import{_ as q}from"./AppLayout.vue_vue_type_script_setup_true_lang-Bj5kaSV7.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-CpjOPsxI.js";import"./VisuallyHidden-DHDcao0B.js";import"./useForwardExpose-D2ntThDi.js";import"./RovingFocusGroup--k4qW6RF.js";import"./chevron-down-BGsi-WZA.js";import"./createLucideIcon-CE7lHlK7.js";import"./check-D4f1VM97.js";import"./useFormControl-AhYNGtvt.js";import"./trash-2-B0540ROg.js";import"./plus-BcevNdpj.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-tnYB5jlE.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-MaRdK9Ps.js";import"./RovingFocusItem-aZMzRmJX.js";import"./upload-Bf126uDQ.js";import"./index-B22QRNYW.js";import"./VisuallyHiddenInput-Fzswobod.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-DPfDGp1o.js";const z={class:"flex h-full flex-1 flex-col gap-4 p-4"},L={class:"grid gap-6 lg:grid-cols-3"},O={class:"lg:col-span-2 space-y-6"},P={class:"space-y-2"},H={key:0,class:"text-sm text-destructive"},J={class:"space-y-2"},K={class:"grid gap-4 sm:grid-cols-2"},Q={class:"space-y-2"},R={class:"space-y-2"},W={class:"space-y-2"},X={class:"space-y-2"},Y={class:"space-y-6"},Z={class:"flex items-center justify-between"},h={class:"space-y-2"},ll={class:"flex justify-end gap-4"},Fl=C({__name:"Edit",props:{blog:{}},setup(b){const r=b,o=N({title:r.blog.title||"",slug:r.blog.slug||"",short_description:r.blog.short_description||"",main_image:r.blog.main_image||"",date:r.blog.date&&r.blog.date.split("T")[0]||"",author:r.blog.author||"",author_url:r.blog.author_url||"",tags:r.blog.tags||[],tags_url:r.blog.tags_url||"",excerpt:r.blog.excerpt||"",content:r.blog.content||[],related_posts:r.blog.related_posts||[],gallery:r.blog.gallery||[],is_active:r.blog.is_active!==void 0?r.blog.is_active:!0,sort_order:r.blog.sort_order||0}),c=V(!1);V(r.blog.slug||""),S(()=>o.title,_=>{_&&!c.value&&(o.slug=_.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""))});const E=()=>{c.value=!0},k=()=>{o.slug=o.slug.trim()||null,o.date=o.date&&o.date.trim()?o.date:null,o.put(`/cms/blogs/${r.blog.id}`)},w=[{title:"Dashboard",href:"/dashboard"},{title:"Blog",href:"/cms/blogs"},{title:"Editar",href:`/cms/blogs/${r.blog.id}/edit`}];return(_,e)=>(y(),v(j,null,[t(l(A),{title:`Editar: ${b.blog.title} - CMS`},null,8,["title"]),t(q,{breadcrumbs:w},{default:s(()=>[d("div",z,[e[29]||(e[29]=d("div",{class:"flex items-center justify-between"},[d("h2",{class:"text-2xl font-bold tracking-tight"},"Editar Artículo")],-1)),d("form",{onSubmit:B(k,["prevent"]),class:"space-y-6"},[d("div",L,[d("div",O,[t(l(n),null,{default:s(()=>[t(l(p),null,{default:s(()=>[t(l(f),null,{default:s(()=>[...e[13]||(e[13]=[i("Información básica",-1)])]),_:1})]),_:1}),t(l(m),{class:"space-y-4"},{default:s(()=>[d("div",P,[t(l(u),{for:"title"},{default:s(()=>[...e[14]||(e[14]=[i("Título *",-1)])]),_:1}),t(l(g),{id:"title",modelValue:l(o).title,"onUpdate:modelValue":e[0]||(e[0]=a=>l(o).title=a),placeholder:"Título del artículo"},null,8,["modelValue"]),l(o).errors.title?(y(),v("p",H,x(l(o).errors.title),1)):F("",!0)]),d("div",J,[t(l(u),{for:"slug"},{default:s(()=>[...e[15]||(e[15]=[i("Slug",-1)])]),_:1}),t(l(g),{id:"slug",modelValue:l(o).slug,"onUpdate:modelValue":e[1]||(e[1]=a=>l(o).slug=a),placeholder:"url-amigable (se genera automáticamente desde el título)",onInput:E},null,8,["modelValue"]),e[16]||(e[16]=d("p",{class:"text-xs text-muted-foreground"}," Se regenera automáticamente desde el título mientras escribes ",-1))]),d("div",K,[d("div",Q,[t(l(u),{for:"author"},{default:s(()=>[...e[17]||(e[17]=[i("Autor",-1)])]),_:1}),t(l(g),{id:"author",modelValue:l(o).author,"onUpdate:modelValue":e[2]||(e[2]=a=>l(o).author=a),placeholder:"Nombre del autor"},null,8,["modelValue"])]),d("div",R,[t(l(u),{for:"date"},{default:s(()=>[...e[18]||(e[18]=[i("Fecha",-1)])]),_:1}),t(l(g),{id:"date",modelValue:l(o).date,"onUpdate:modelValue":e[3]||(e[3]=a=>l(o).date=a),type:"date"},null,8,["modelValue"])])]),d("div",W,[t(l(u),{for:"short_description"},{default:s(()=>[...e[19]||(e[19]=[i("Descripción corta",-1)])]),_:1}),t(l(U),{id:"short_description",modelValue:l(o).short_description,"onUpdate:modelValue":e[4]||(e[4]=a=>l(o).short_description=a),placeholder:"Breve descripción del artículo",rows:2},null,8,["modelValue"])]),d("div",X,[t(l(u),{for:"excerpt"},{default:s(()=>[...e[20]||(e[20]=[i("Extracto",-1)])]),_:1}),t(l(U),{id:"excerpt",modelValue:l(o).excerpt,"onUpdate:modelValue":e[5]||(e[5]=a=>l(o).excerpt=a),placeholder:"Extracto para mostrar en listados",rows:3},null,8,["modelValue"])])]),_:1})]),_:1}),t(l(n),null,{default:s(()=>[t(l(p),null,{default:s(()=>[t(l(f),null,{default:s(()=>[...e[21]||(e[21]=[i("Contenido del artículo",-1)])]),_:1})]),_:1}),t(l(m),null,{default:s(()=>[t(D,{modelValue:l(o).content,"onUpdate:modelValue":e[6]||(e[6]=a=>l(o).content=a),label:""},null,8,["modelValue"])]),_:1})]),_:1})]),d("div",Y,[t(l(n),null,{default:s(()=>[t(l(p),null,{default:s(()=>[t(l(f),null,{default:s(()=>[...e[22]||(e[22]=[i("Publicación",-1)])]),_:1})]),_:1}),t(l(m),{class:"space-y-4"},{default:s(()=>[d("div",Z,[t(l(u),{for:"is_active"},{default:s(()=>[...e[23]||(e[23]=[i("Activo",-1)])]),_:1}),t(l(T),{id:"is_active",checked:l(o).is_active,"onUpdate:checked":e[7]||(e[7]=a=>l(o).is_active=a)},null,8,["checked"])]),d("div",h,[t(l(u),{for:"sort_order"},{default:s(()=>[...e[24]||(e[24]=[i("Orden",-1)])]),_:1}),t(l(g),{id:"sort_order",modelValue:l(o).sort_order,"onUpdate:modelValue":e[8]||(e[8]=a=>l(o).sort_order=a),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])])]),_:1})]),_:1}),t(l(n),null,{default:s(()=>[t(l(p),null,{default:s(()=>[t(l(f),null,{default:s(()=>[...e[25]||(e[25]=[i("Imagen principal",-1)])]),_:1})]),_:1}),t(l(m),null,{default:s(()=>[t(M,{modelValue:l(o).main_image,"onUpdate:modelValue":e[9]||(e[9]=a=>l(o).main_image=a),label:""},null,8,["modelValue"])]),_:1})]),_:1}),t(l(n),null,{default:s(()=>[t(l(p),null,{default:s(()=>[t(l(f),null,{default:s(()=>[...e[26]||(e[26]=[i("Etiquetas",-1)])]),_:1})]),_:1}),t(l(m),null,{default:s(()=>[t(G,{modelValue:l(o).tags,"onUpdate:modelValue":e[10]||(e[10]=a=>l(o).tags=a),label:"",placeholder:"Agregar etiqueta..."},null,8,["modelValue"])]),_:1})]),_:1}),t(l(n),null,{default:s(()=>[t(l(p),null,{default:s(()=>[t(l(f),null,{default:s(()=>[...e[27]||(e[27]=[i("Galería",-1)])]),_:1})]),_:1}),t(l(m),null,{default:s(()=>[t(I,{modelValue:l(o).gallery,"onUpdate:modelValue":e[11]||(e[11]=a=>l(o).gallery=a),label:"","simple-mode":!0},null,8,["modelValue"])]),_:1})]),_:1})])]),d("div",ll,[t(l($),{type:"button",variant:"outline",onClick:e[12]||(e[12]=a=>_.$inertia.visit("/cms/blogs"))},{default:s(()=>[...e[28]||(e[28]=[i(" Cancelar ",-1)])]),_:1}),t(l($),{type:"submit",disabled:l(o).processing},{default:s(()=>[i(x(l(o).processing?"Guardando...":"Guardar cambios"),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{Fl as default};
